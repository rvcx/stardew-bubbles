<html>
<h1>Stardew Valley Fishing Bubble Predictor</h1>
Game ID: <input placeholder="(end of save file name)" id="seed" />
Day <input type="number" min="1" max="28" value="1" id="day" />
of <select id="month">
  <option value="0" default>Spring</option>
  <option value="1">Summer</option>
  <option value="2">Fall</option>
  <option value="3">Winter</option>
</select>
Year <input type="number" min="1" value="1" id="year" />
<select id="location"></select>

<div id="container">
  <img id="image" src="beach.png" />
  <div id="splashes">
  </div>
</div>

Inaccurate prediction?
<a href="https://github.com/rvcx/stardew-bubbles/issues">Report an issue!</a>

<style>
* { font-family: courier }
#year { width: 3em }
#container { position: relative }
#image {
  position: absolute
  left: 0
  top: 0
}
.splash {
  z-index: 100;
  display: -webkit-flex;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: absolute;
  color: white;
  width: 44px;
  height: 44px;
  border: 2px solid;
  padding: 0;
  margin: 0;
  border-radius: 16px;
  font-family: 'Courier New', monospace;
  font-size: 10px;
  font-weight: bold;
  vertical-align: middle;
  background-color: black;
  opacity: 0.4;
}
</style>

<script>
function rng(seed) {
  "use strict"
  let imax = 2147483647
  var seeds = []
  var mj = 161803398 - Math.abs(parseInt(seed))
  seeds[55] = mj
  var mk = 1
  for (var i = 1; i < 55; ++i) {
    var ii = (21 * i) % 55
    seeds[ii] = mk
    mk = mj - mk
    if (mk < 0) { mk += imax }
    mj = seeds[ii]
  }
  for (var j = 0; j < 4; ++j) {
    for (var i = 1; i < 56; ++i) {
      seeds[i] -= seeds[1 + (i + 30) % 55]
      if (seeds[i] > imax) { seeds[i] -= (imax * 2 + 1) }
      if (seeds[i] < 0) { seeds[i] += imax }
    }
  }
  var inext = 0
  var ip = 21
  return function () {
    inext %= 55
    ip %= 55
    ++inext;
    ++ip;
    var r = seeds[inext] - seeds[ip]
    if (r == imax) { r -= 1 }
    if (r < 0) { r += imax }
    seeds[inext] = r
    return r / imax
  }
}

function bubbles(gid, day, width, height, candidates) {
  var t = 600
  function step_t() { t += (t % 100 == 50) ? 50 : 10 }
  function spawn() {
    let r = rng(gid / 2 + day + t)
    if (r() < 0.5) {
      for (var i = 0; i < 2; ++i) {
        c = [parseInt(width * r()), parseInt(height * r())]
        if (candidates.has(JSON.stringify(c))) { return c }
      }
    }
    return null
  }
  function maintain() { return rng(gid / 2 + day + t)() >= 0.1 }
  out = []
  while (t < 2600) {
    let b = spawn()
    if (b != null) {
      let start = t
      do { step_t() } while (t < 2600 && maintain())
      out.push([start, t, b])
    }
    step_t()
  }
  return out
}

let locations = [
// Name, imgurl, width, height, set-of-stringified-bubble-candidate-coords
  ["Beach", "beach.png", 104, 50, new Set([
    [7,26], [82,29], [26,39], [79,42], [7,35], [18,35], [48,36], [60,10],
    [60,19], [94,21], [91,34], [21,37], [83,30], [94,39], [95,4],
    [95,13], [95,22], [45,30], [67,27], [78,36], [14,42], [79,28],
    [7,21], [79,37], [7,30], [48,31], [82,33], [40,27], [48,40],
    [60,5], [6,34], [21,32], [91,29], [6,43], [60,23], [94,25],
    [94,34], [41,28], [52,28], [95,8], [93,38], [85,43], [3,10],
    [86,44], [70,27], [78,40], [47,34], [17,39], [28,39], [71,28],
    [82,28], [48,35], [60,9], [21,27], [6,38], [29,40], [40,40],
    [60,18], [21,36], [44,28], [93,42], [59,22], [78,35], [78,44],
    [89,44], [47,38], [17,34], [79,27], [17,43], [6,15], [48,30],
    [82,32], [63,28], [48,39], [60,4], [6,33], [21,31], [6,42],
    [60,22], [21,40], [52,27], [93,28], [93,37], [3,9], [59,8],
    [59,17], [55,28], [59,26], [78,39], [47,33], [17,29], [17,38],
    [6,10], [9,43], [6,19], [48,34], [60,8], [62,27], [6,37], [21,35],
    [20,39], [74,28], [93,41], [97,2], [43,31], [32,40], [43,40],
    [59,3], [16,32], [59,21], [47,28], [92,27], [47,37], [17,33],
    [17,42], [80,43], [6,14], [60,3], [81,35], [21,30], [81,44],
    [54,27], [20,34], [93,27], [23,39], [93,36], [66,28], [16,27],
    [24,40], [59,7], [35,40], [88,43], [59,16], [55,27], [59,25],
    [5,17], [47,32], [17,28], [92,31], [17,37], [6,18], [42,39],
    [62,26], [20,29], [20,38], [74,27], [12,43], [43,30], [32,39],
    [43,39], [59,2], [16,31], [5,12], [47,27], [77,28], [58,24],
    [92,26], [92,35], [92,44], [6,13], [8,32], [81,34], [39,28],
    [20,33], [96,10], [57,27], [96,19], [46,27], [5,16], [69,28],
    [80,28], [92,30], [61,24], [8,27], [19,27], [42,29], [27,40],
    [91,43], [62,25], [20,28], [4,11], [20,37], [96,5], [96,14],
    [12,42], [34,39], [45,39], [16,30], [46,31], [38,27], [49,27],
    [46,40], [5,11], [77,27], [15,43], [58,23], [7,39], [18,39],
    [50,28], [8,22], [8,31], [83,34], [30,40], [83,43], [94,43],
    [95,17], [39,27], [31,23], [95,26], [20,32], [84,44], [96,9],
    [96,18], [37,39], [57,26], [7,25], [38,40], [79,41], [7,34],
    [18,34], [58,27], [69,27], [80,27], [7,43], [18,43], [91,33],
    [8,26], [42,28], [83,29], [27,39], [94,38], [95,3], [95,12],
    [95,21], [4,10], [72,28], [96,4], [96,13], [87,44], [96,22],
    [46,30], [46,39], [7,20], [79,36], [7,29], [15,42], [7,38],
    [18,38], [91,28], [8,21], [94,24], [8,30], [83,33], [41,27],
    [94,42], [95,7], [95,16], [95,25], [53,28], [64,28], [96,8],
    [22,40], [86,43], [57,25], [7,24], [71,27], [82,27], [79,40],
    [7,33], [18,33], [7,42], [18,42], [29,39], [40,39], [60,17],
    [91,32], [60,26], [83,28], [94,37], [44,27], [95,11], [41,40],
    [95,20], [4,9], [72,27], [10,43], [96,3], [45,28], [56,28],
    [78,34], [78,43], [89,43], [7,19], [79,35], [7,28], [18,28],
    [82,31], [79,44], [63,27], [7,37], [18,37], [48,38], [90,44],
    [91,27], [6,41], [60,21], [94,23], [21,39], [83,32], [75,28],
    [95,6], [95,15], [44,31], [33,40], [44,40], [53,27], [64,27],
    [22,39], [78,38], [7,23], [9,42], [79,39], [48,33], [82,35],
    [82,44], [60,7], [6,36], [60,16], [21,34], [60,25], [83,27],
    [94,27], [41,39], [93,40], [10,42], [25,40], [59,20], [78,42],
    [47,36], [17,32], [17,41], [79,34], [48,28], [82,30], [63,26],
    [48,37], [60,2], [21,29], [6,40], [81,43], [60,20], [21,38],
    [93,26], [93,35], [44,30], [93,44], [66,27], [24,39], [59,6],
    [35,39], [67,28], [78,28], [59,24], [78,37], [47,31], [17,27],
    [36,40], [47,40], [17,36], [6,17], [48,32], [40,28], [60,6],
    [6,35], [21,33], [2,10], [93,39], [43,29], [85,44], [13,43],
    [59,10], [59,19], [70,28], [47,35], [17,31], [92,34], [17,40],
    [28,40], [92,43], [6,12], [48,27], [21,28], [6,39], [93,25],
    [93,34], [51,28], [93,43], [97,4], [59,5], [16,34], [78,27],
    [16,43], [59,23], [5,15], [47,30], [92,29], [36,39], [47,39],
    [17,35], [6,16], [81,28], [20,27], [39,40], [20,36], [2,9],
    [43,28], [16,29], [13,42], [59,9], [59,18], [5,10], [5,19],
    [58,22], [17,30], [92,33], [50,27], [61,27], [6,11], [6,20],
    [30,39], [62,28], [73,28], [20,31], [20,40], [31,40], [84,43],
    [96,17], [51,27], [97,3], [59,4], [16,33], [16,42], [38,39],
    [5,14], [58,26], [92,28], [80,35], [80,44], [8,25], [42,27],
    [8,34], [81,27], [8,43], [54,28], [39,39], [20,35], [96,12],
    [23,40], [87,43], [96,21], [43,27], [16,28], [88,44], [5,9],
    [5,18], [58,21], [92,32], [61,26], [8,20], [8,29], [42,31],
    [42,40], [94,41], [73,27], [11,43], [95,24], [20,30], [31,39],
    [96,7], [96,16], [65,28], [76,28], [5,13], [7,32], [58,25],
    [7,41], [18,41], [80,34], [91,31], [8,24], [8,33], [94,36],
    [8,42], [95,10], [95,19], [96,2], [96,11], [45,27], [56,27],
    [96,20], [46,28], [57,28], [68,28], [7,18], [7,27], [18,27],
    [26,40], [79,43], [90,43], [7,36], [18,36], [61,25], [8,19],
    [94,22], [91,35], [8,28], [19,28], [42,30], [83,31], [75,27],
    [91,44], [94,40], [95,5], [95,14], [11,42], [95,23], [33,39],
    [44,39], [96,6], [96,15], [45,31], [34,40], [45,40], [65,27],
    [76,27], [14,43], [38,28], [49,28], [7,22], [79,38], [7,31],
    [82,34], [7,40], [18,40], [82,43], [91,30], [8,23], [30,23],
    [60,24], [94,26], [83,35], [94,35], [83,44], [95,9], [94,44],
    [95,18], [25,39], [56,26], [37,40], [78,41], [68,27]
  ].map(JSON.stringify))],
  ["Mountain", "mountain.png", 135, 41, new Set([
    [72,18], [73,17], [53,14], [55,11], [54,13], [72,27], [62,26],
    [53,23], [63,25], [47,16], [63,34], [56,28], [77,26], [51,16],
    [74,18], [52,15], [75,17], [60,28], [51,25], [61,27], [52,24],
    [75,26], [77,35], [49,16], [75,35], [72,20], [73,19], [76,36],
    [55,13], [62,28], [53,25], [64,25], [54,24], [63,27], [64,34],
    [63,36], [67,27], [51,18], [50,20], [52,17], [75,19], [46,13],
    [74,20], [61,29], [52,26], [75,28], [60,30], [49,18], [72,22],
    [71,24], [73,21], [76,38], [63,20], [45,14], [47,11], [56,14],
    [53,27], [54,26], [64,27], [77,21], [63,38], [50,13], [51,20],
    [52,19], [75,21], [60,32], [78,38], [61,31], [52,28], [75,30],
    [48,15], [76,31], [53,11], [71,26], [73,23], [63,22], [47,13],
    [62,32], [54,28], [77,23], [78,22], [51,13], [52,12], [58,28],
    [69,28], [51,22], [70,27], [52,21], [61,33], [75,32], [76,24],
    [72,17], [48,17], [76,33], [53,13], [54,12], [71,28], [62,25],
    [63,24], [63,33], [77,25], [78,24], [51,15], [50,17], [52,14],
    [77,34], [61,26], [52,23], [75,25], [65,26], [76,26], [73,18],
    [76,35], [63,17], [54,14], [63,26], [63,35], [77,36], [50,19],
    [52,16], [75,18], [64,36], [61,28], [52,25], [46,15], [48,12],
    [65,28], [76,28], [66,27], [71,23], [73,20], [76,37], [63,19],
    [45,13], [56,13], [54,25], [72,24], [63,37], [50,12], [67,28],
    [50,21], [52,18], [78,37], [64,38], [61,30], [52,27], [76,21],
    [48,14], [76,30], [49,13], [71,25], [63,21], [72,26], [77,22],
    [53,22], [47,15], [62,34], [55,28], [69,27], [52,20], [74,17],
    [61,32], [51,24], [76,23], [48,16], [76,32], [49,15], [75,34],
    [54,11], [57,28], [68,28], [63,23], [72,19], [55,12], [72,28],
    [62,27], [53,24], [78,23], [50,16], [52,13], [64,33], [59,28],
    [70,28], [51,17], [74,19], [46,12], [51,26], [65,25], [76,25],
    [75,27], [60,29], [76,34], [49,17], [72,21], [55,14], [62,29],
    [53,26], [78,25], [64,26], [50,18], [64,35], [51,19], [74,21],
    [75,20], [77,38], [46,14], [57,14], [65,27], [76,27], [75,29],
    [60,31], [63,18], [72,23], [73,22], [47,12], [53,28], [64,28],
    [54,27], [62,31], [64,37], [51,12], [51,21], [76,20], [75,22],
    [48,13], [76,29], [49,12], [66,28], [52,29], [75,31], [53,12],
    [72,25], [71,27], [73,24], [53,21], [47,14], [62,33], [77,24],
    [77,37], [51,14], [51,23], [76,22], [52,22], [61,34], [75,33],
    [68,27]
  ].map(JSON.stringify))],
  ["Forest", "forest.png", 120, 120, new Set([
  [38,23], [26,30], [47,62], [59,64], [101,42], [36,71], [48,36],
    [79,51], [29,32], [55,93], [16,111], [46,112], [68,112], [71,56],
    [82,56], [41,24], [61,91], [40,68], [33,29], [44,29], [105,45],
    [116,45], [44,38], [19,112], [30,112], [74,57], [54,88], [66,53],
    [34,30], [45,30], [51,64], [117,46], [54,97], [103,111],
    [114,111], [54,106], [32,69], [97,49], [32,78], [89,45], [24,74],
    [35,74], [4,105], [67,54], [78,54], [87,112], [113,39], [36,66],
    [47,66], [90,46], [29,27], [40,27], [101,46], [65,111], [28,71],
    [76,111], [47,84], [28,80], [15,110], [38,112], [49,112], [63,56],
    [58,90], [50,86], [61,86], [41,28], [77,112], [61,95], [44,24],
    [62,60], [41,37], [105,40], [116,40], [44,33], [25,29], [27,111],
    [85,43], [108,45], [8,107], [31,81], [62,96], [45,25], [51,59],
    [23,77], [66,57], [54,92], [54,101], [37,30], [43,64], [39,112],
    [86,44], [109,46], [84,111], [95,111], [51,86], [35,69], [47,34],
    [32,82], [53,105], [106,111], [24,78], [35,78], [67,58], [70,54],
    [47,61], [59,63], [35,79], [101,41], [40,22], [36,70], [48,35],
    [107,112], [46,111], [68,111], [27,79], [41,23], [61,90], [62,55],
    [44,28], [62,64], [80,112], [54,60], [33,37], [44,37], [108,40],
    [19,111], [30,111], [74,56], [54,87], [32,68], [97,48], [36,29],
    [64,100], [89,44], [28,25], [24,73], [47,38], [35,73], [78,53],
    [28,34], [4,104], [53,109], [64,109], [55,60], [87,111], [92,46],
    [22,112], [77,57], [47,65], [49,84], [40,26], [65,110], [42,63],
    [38,111], [49,111], [79,112], [81,54], [50,85], [61,94], [62,59],
    [105,39], [116,39], [39,66], [25,28], [54,64], [32,36], [11,111],
    [23,76], [41,112], [52,112], [53,86], [43,63], [95,110], [56,91],
    [35,68], [47,33], [64,104], [35,77], [65,78], [111,45], [109,112],
    [46,83], [92,50], [58,57], [69,57], [48,34], [80,57], [49,88],
    [29,30], [40,30], [112,46], [61,62], [98,111], [104,42], [42,67],
    [7,109], [81,58], [71,112], [50,89], [62,54], [73,54], [30,83],
    [61,89], [82,112], [62,63], [110,112], [54,59], [108,39], [96,43],
    [35,36], [64,81], [99,48], [10,110], [34,77], [33,112], [53,90],
    [65,55], [44,112], [45,86], [64,99], [72,112], [28,24], [53,108],
    [36,37], [47,37], [111,40], [28,33], [64,108], [117,111], [38,65],
    [49,65], [22,111], [92,45], [77,56], [26,72], [46,87], [80,52],
    [26,81], [40,25], [61,57], [50,66], [39,29], [104,46], [115,46],
    [79,111], [39,38], [90,111], [30,69], [31,34], [101,111],
    [63,103], [84,55], [39,65], [54,63], [43,26], [91,112], [102,112],
    [31,70], [32,35], [23,75], [64,76], [88,43], [99,43], [34,72],
    [41,111], [53,85], [52,111], [25,112], [65,59], [56,90], [64,103],
    [28,28], [57,64], [49,60], [109,111], [38,69], [80,47], [92,49],
    [14,111], [57,91], [58,56], [80,56], [49,87], [50,61], [61,61],
    [98,110], [42,66], [31,29], [63,98], [103,45], [114,45], [71,111],
    [82,111], [73,53], [63,107], [30,82], [60,92], [72,57], [52,88],
    [32,30], [33,84], [44,84], [96,42], [116,109], [34,67], [45,67],
    [64,80], [99,47], [10,109], [34,76], [33,111], [53,89], [65,54],
    [76,54], [45,85], [2,105], [44,111], [74,112], [28,23], [57,59],
    [117,110], [111,39], [49,64], [92,44], [42,25], [26,71], [3,106],
    [80,51], [26,80], [36,112], [47,112], [61,56], [48,86], [63,84],
    [27,72], [39,37], [103,40], [114,40], [31,33], [63,102], [84,45],
    [106,45], [6,107], [104,112], [115,112], [43,25], [33,79],
    [25,75], [24,30], [35,30], [107,46], [45,62], [64,75], [99,42],
    [52,110], [34,71], [46,36], [64,84], [37,67], [93,111], [25,111],
    [65,58], [66,112], [68,54], [46,63], [57,63], [27,22], [59,91],
    [38,68], [27,31], [55,102], [30,27], [91,43], [102,43], [42,38],
    [94,48], [17,112], [39,23], [28,112], [9,108], [60,55], [75,53],
    [60,64], [63,97], [52,60], [112,111], [106,40], [63,106], [95,49],
    [87,45], [60,91], [72,56], [52,87], [33,83], [44,83], [25,79],
    [56,57], [45,66], [64,79], [34,75], [74,111], [2,104], [65,53],
    [38,36], [49,36], [76,53], [85,111], [57,58], [68,58], [13,110],
    [55,88], [79,55], [55,97], [27,26], [86,112], [42,24], [55,106],
    [91,47], [102,47], [36,111], [94,43], [5,105], [47,111], [48,85],
    [29,81], [114,39], [75,57], [63,101], [41,64], [52,64], [84,44],
    [95,44], [6,106], [104,111], [115,111], [33,69], [45,34], [33,78],
    [52,91], [25,74], [54,110], [44,87], [53,65], [116,112], [34,70],
    [46,35], [37,66], [26,29], [66,111], [68,53], [79,50], [36,79],
    [55,92], [16,110], [47,88], [82,55], [59,90], [27,30], [55,101],
    [110,46], [48,62], [102,42], [63,60], [30,35], [40,67], [17,111],
    [28,111], [69,112], [83,56], [60,63], [52,59], [106,39], [41,68],
    [44,64], [34,29], [45,29], [87,44], [117,45], [54,96], [45,38],
    [62,100], [54,105], [33,82], [64,60], [25,78], [20,112], [51,90],
    [31,112], [67,53], [59,58], [70,58], [49,35], [98,49], [90,45],
    [88,112], [99,112], [79,54], [28,70], [55,96], [27,25], [42,23],
    [55,105], [63,55], [30,30], [48,66], [91,46], [41,27], [102,46],
    [94,42], [77,111], [29,71], [48,84], [44,32], [29,80], [9,111],
    [50,112], [75,56], [62,86], [41,63], [52,63], [62,95], [115,110],
    [54,91], [117,40], [33,68], [45,33], [54,100], [37,29], [39,111],
    [86,43], [97,43], [37,38], [109,45], [25,73], [51,85], [54,109],
    [32,81], [23,112], [24,77], [67,57], [78,57], [70,53], [26,28],
    [38,30], [55,64], [51,112], [96,111], [107,111], [36,69], [79,49],
    [82,45], [55,91], [47,87], [71,54], [82,54], [48,61], [102,41],
    [41,22], [63,59], [40,66], [44,27], [5,108], [69,111], [80,111],
    [33,36], [8,110], [42,112], [54,86], [44,63], [45,28], [62,99],
    [54,95], [81,112], [34,37], [45,37], [109,40], [43,67], [54,104],
    [97,47], [20,111], [31,111], [89,43], [51,89], [24,72], [35,72],
    [78,52], [55,59], [59,57], [70,57], [26,32], [98,48], [90,44],
    [113,46], [65,109], [88,111], [99,111], [79,53], [29,34], [71,58],
    [63,54], [48,65], [50,84], [41,26], [100,112], [61,93], [111,112],
    [29,70], [44,31], [25,27], [50,111], [62,85], [62,94], [11,110],
    [54,90], [117,39], [45,32], [54,99], [43,62], [97,42], [54,108],
    [35,67], [32,80], [12,111], [24,76], [35,76], [4,107], [78,56],
    [23,111], [53,112], [55,63], [98,43], [96,110], [36,68], [101,48],
    [29,29], [40,29], [112,45], [40,38], [104,41], [28,82], [15,112],
    [26,112], [7,108], [81,57], [50,88], [61,88], [41,30], [44,26],
    [62,62], [110,111], [54,58], [33,35], [39,69], [25,31], [93,49],
    [85,45], [8,109], [42,111], [83,112], [94,112], [74,54], [31,83],
    [51,61], [54,94], [66,59], [109,39], [43,66], [72,111], [35,71],
    [36,36], [47,36], [32,84], [28,32], [53,107], [64,107], [100,48],
    [55,58], [34,112], [45,112], [59,56], [46,86], [47,63], [40,24],
    [99,110], [48,37], [112,40], [29,33], [50,65], [104,45], [115,45],
    [113,112], [27,81], [18,112], [41,25], [61,92], [73,57], [33,30],
    [44,30], [39,64], [93,44], [105,46], [116,46], [91,111],
    [102,111], [31,69], [32,34], [23,74], [75,112], [54,89], [66,54],
    [51,65], [103,112], [114,112], [32,70], [35,66], [64,102],
    [28,27], [24,75], [35,75], [100,43], [4,106], [53,111], [64,111],
    [92,48], [14,110], [37,112], [57,90], [80,55], [49,86], [29,28],
    [40,28], [58,64], [50,60], [61,60], [40,37], [104,40], [115,40],
    [65,112], [76,112], [42,65], [15,111], [26,111], [58,91], [81,56],
    [7,107], [50,87], [61,87], [30,81], [61,96], [44,25], [62,61],
    [105,41], [39,68], [93,48], [32,29], [85,44], [108,46], [8,108],
    [43,38], [83,111], [74,53], [94,111], [31,82], [51,60], [66,58],
    [53,88], [45,84], [95,112], [106,112], [28,22], [35,70], [47,35],
    [53,106], [64,106], [28,31], [46,67], [65,80], [100,47],
    [117,109], [34,111], [92,43], [3,105], [77,54], [45,111], [46,85],
    [80,50], [26,79], [40,23], [112,39], [61,55], [50,64], [61,64],
    [27,71], [113,111], [27,80], [18,111], [48,112], [62,56], [73,56],
    [63,110], [62,65], [93,43], [43,24], [31,68], [24,29], [35,29],
    [107,45], [75,111], [64,74], [105,112], [64,83], [34,79], [53,92],
    [65,57], [76,57], [64,101], [36,30], [28,26], [46,62], [53,110],
    [100,42], [64,110], [38,67], [92,47], [37,111], [67,112],
    [78,112], [89,112], [69,54], [42,37], [80,54], [49,85], [58,63],
    [61,59], [104,39], [115,39], [81,46], [42,64], [63,96], [81,55],
    [30,71], [63,105], [95,48], [29,112], [40,112], [60,90], [39,67],
    [52,86], [53,60], [94,110], [43,37], [107,40], [96,49], [45,65],
    [64,78], [88,45], [34,74], [108,112], [53,87], [37,70], [2,103],
    [45,83], [28,21], [57,57], [68,57], [64,105], [117,108], [46,66],
    [65,79], [100,46], [111,46], [49,62], [86,111], [3,104], [77,53],
    [97,111], [46,84], [80,49], [26,78], [58,58], [69,58], [70,112],
    [61,63], [98,112], [27,70], [42,68], [63,100], [103,47], [48,111],
    [84,43], [95,43], [63,109], [60,94], [43,23], [21,112], [52,90],
    [64,55], [44,86], [24,28], [53,64], [35,37], [105,111], [116,111],
    [34,69], [46,34], [64,82], [37,65], [10,111], [34,78], [53,91],
    [76,56], [66,110], [45,87], [46,61], [38,66], [49,66], [55,100],
    [110,45], [26,73], [67,111], [78,111], [69,53], [30,34], [80,53],
    [89,111], [91,50], [48,88], [83,55], [39,30], [90,112], [63,95],
    [103,42], [30,70], [31,35], [101,112], [63,104], [41,67],
    [29,111], [40,111], [87,43], [72,54], [84,56], [52,85], [33,81],
    [53,59], [64,59], [25,77], [107,39], [96,48], [56,64], [64,77],
    [88,44], [34,73], [46,38], [108,111], [37,69], [32,112], [43,112],
    [46,65], [49,61], [27,24], [55,95], [97,110], [42,22], [110,40],
    [27,33], [55,104], [80,48], [30,29], [91,45], [102,45], [70,111],
    [9,110], [60,57], [31,30], [63,99], [103,46], [114,46], [95,42],
    [63,108], [33,67], [44,67], [60,93], [72,58], [21,111], [52,89],
    [64,54], [37,37], [25,72], [44,85], [73,112], [53,63], [56,59],
    [116,110], [34,68], [46,33], [26,27], [38,29], [51,111], [38,38],
    [79,48], [24,112], [35,112], [55,90], [79,57], [47,86], [71,53],
    [55,99], [27,28], [48,60], [63,58], [30,33], [91,49], [40,65],
    [83,45], [5,107], [92,112], [48,87], [63,85], [103,41], [41,66],
    [106,46], [45,27], [44,62], [62,98], [6,108], [72,53], [34,36],
    [81,111], [54,103], [33,80], [64,58], [25,76], [51,88], [45,63],
    [56,63], [93,112], [46,37], [37,68], [26,31], [98,47], [32,111],
    [43,111], [90,43], [101,43], [113,45], [79,52], [55,94], [27,23],
    [16,112], [110,39], [71,57], [27,32], [82,57], [55,103], [30,28],
    [91,44], [100,111], [111,111], [29,69], [94,49], [9,109], [60,56],
    [75,54], [52,61], [112,112], [62,93], [44,66], [45,31], [54,98],
    [73,111], [64,53], [37,36], [25,71], [54,107], [25,80], [32,79],
    [56,58], [12,110], [26,26], [85,112], [98,42], [38,37], [113,40],
    [36,67], [101,47], [13,111], [24,111], [35,111], [55,89], [79,56],
    [28,72], [47,85], [55,98], [27,27], [28,81], [91,48], [41,29],
    [40,64], [83,44], [94,44], [5,106], [41,38], [92,111], [33,34],
    [44,34], [29,82], [25,30], [27,112], [41,65], [52,65], [62,97],
    [45,26], [54,93], [34,35], [54,102], [86,45], [54,111], [84,112],
    [51,87], [32,83], [24,79]
  ].map(JSON.stringify))]
]

function locOption(i) {
  return '<option value="' + i + '">' + locations[i][0] + '</option>'
}
document.getElementById("location").innerHTML
  = [...Array(locations.length).keys()].map(locOption).join("\n")

function time_as_string(t) {
  return (parseInt(t / 100) % 24).toString() + ":" + ("0" + (t % 100)).slice(-2)
}

function updateValue(e) {
  const container = document.getElementById("splashes")
  gid = parseInt(document.getElementById("seed").value)
  mday = parseInt(document.getElementById("day").value)
  month = parseInt(document.getElementById("month").value)
  year = parseInt(document.getElementById("year").value)
  locIndex = parseInt(document.getElementById("location").value)
  day = (year - 1) * 28 * 4 + month * 28 + mday
  loc = locations[locIndex]
  function formatDiv(b) {
    return '<div class="splash" style="top:' + (b[2][1] - 1) * 16 + 'px;left:' + (b[2][0] - 1) * 16 + 'px">'
      + time_as_string(b[0]) + '<br>to<br>' + time_as_string(b[1])
      + '</div>'
  }
  bs = bubbles(gid, day, loc[2], loc[3], loc[4])
  document.getElementById("image").src = loc[1]
  container.innerHTML = bs.map(formatDiv).join("\n")
}

let inputs = ["seed", "day", "month", "year", "location"]
for (let i = 0; i < inputs.length; ++i) {
  const input = document.getElementById(inputs[i]);
  input.addEventListener("change", updateValue);
}
</script>

</html>